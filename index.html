<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>〇 - A Lightweight Framework</title>
    <script type="application/javascript" src="o.min.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-1.19.0.css">
    <link rel="stylesheet" href="index.css">
</head>
<body class="body">
    <aside class="sidebar">
        <nav id="navigation"></nav>
    </aside>
    <article class="content">
        <header class="page-header">
            <h1 class="page-header-title">〇.js <span class="version js-version"></span></h1>
            <div class="page-header-subtitle">A light framework. Because everyone should have one.</div>
        </header>
        <section>
            <h2>Basics</h2>
            <div>
                〇 was written with three things in mind -
                <ol type="i">
                    <li>Learning by experience, which I encourage anyone to do</li>
                    <li>Having a framework doing exactly what I need, and I know how it's being done</li>
                    <li>finally, having a framework's design as I believe it should</li>
                </ol>
            </div><p>
                I believe in clear separation between code (Javascript), structure (HTML) and style (CSS).
                Having this distinction means the code can easily be replaced with having minimum change in the structure and the style, and vice versa.
                This means the code shouldn't dictate which tag is being used and all relevant style alternation are via classes that have a "js-" prefix.
            </p><p>
                I tried to be compatible with <a href="https://github.com/airbnb/javascript" target="_blank" title="Read the code styling guide">AirBNB code styling guide</a> as I agree most notes will result with better, more readable code that is less likely to contain bugs.
            </p><p>
                When possible, methods will return the called object in order to allow chaining, for example: <pre>〇.CSS.add(〇.ELM.myButton,'green').add(〇.ELM.button2,'red')</pre>
            </p>
        </section>
        <section>
            <h2>Download</h2>
            <ul class="downloads">
                <li><a href="o.js">Uncompressed</a> - (19KB)</li>
                <li><a href="o.js">Compressed</a> - (7KB)</li>
            </ul>
        </section>
        <section>
            <h2>Unit Tests</h2>
            <div id="qunit" class="unit-tests"></div>
            <div id="qunit-fixture"></div>
        </section>
        <section>
            <h2>EVT</h2>
            <i>EVT</i> can be used to listen and to dispatch events. <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event" target="_blank" title="Read more about events at mozilla website">Event</a>-dispatching is a great way to tell other components that something happened.
            <ul class="methods">
                <li>
                    <h4>subscribe<span class="parameters">(sEventName,fHandler)</span></h4>
                    <pre>〇.EVT.subscribe("anEvent",foo)</pre>
                    <div>Whenever <i>anEvent</i> is dispatched, the function <i>foo</i> will be called with event as an input.</div>
                </li>
                <li>
                    <h4>unsubscribe<span class="parameters">(sEventName,fHandler)</span></h4>
                    <pre>〇.EVT.unsubscribe("anEvent",foo)</pre>
                    <div>Stop calling <i>foo</i> when <i>anEvent</i> is dispatched.</div>
                </li>
                <li>
                    <h4>dispatch<span class="parameters">(sEventName)</span></h4>
                    <pre>〇.EVT.dispatch("anEvent")</pre>
                    <div>Calls an event.</div>
                </li>
                <li>
                    <h4>getDispatcher<span class="parameters">(sEventName[, fHandler])</span></h4>
                    <pre>dButton.onclick = 〇.EVT.getDispatcher("anEvent")</pre>
                    <div>Returns a function that when triggered, will dispatch an event. if <i>fHandler</i> is provided, it will be subscribed to the event.</div>
                </li>
            </ul>
        </section>
        <section>
            <h2>DOM</h2>
            <div>
                <i>DOM</i> is use to make changes in the <a href="http://www.w3.org/DOM/" target="_blank" title="Read more about the DOM at w3">Document Object Model</a>, which is how the browser keep the page's information.
                It is important to emphasize that ideally HTML code should not be written within the code. The use of templates is encouraged.
            </div>
            <ul class="methods">
                <li>
                    <h4>create<span class="parameters">(sTag,oAttribtues,sInnerText)</span></h4>
                    <pre>〇.DOM.create('a',{href:'#top'},'back to top')</pre>
                    <div>Return a DOM element with the provided attributes.</div>
                </li>
                <li>
                    <h4>parse<span class="parameters">(sHTML)</span></h4>
                    <pre>〇.DOM.parse('&lt;a href="#top"&gt;back to top&lt;/a&gt;')</pre>
                    <div>Converts the provided string to a DOM element.</div>
                </li>
                <li>
                    <h4>insertBefore<span class="parameters">(dElement,dNewElement)</span></h4>
                    <pre>〇.DOM.insertBefore(〇.ELM.homeLink,contactLink)</pre>
                    <div>Inserts a new DOM element before a given as a <i>sibling</i>.</div>
                </li>
                <li>
                    <h4>insertAfter<span class="parameters">(dElement,dNewElement)</span></h4>
                    <pre>〇.DOM.insertAfter(〇.ELM.homeLink,contactLink)</pre>
                    <div>Inserts a new DOM element after a given as a <i>sibling</i>.</div>
                </li>
                <li>
                    <h4>prepend<span class="parameters">(dElement,dNewElement)</span></h4>
                    <pre>〇.DOM.prepend(〇.ELM.menu,contactLink)</pre>
                    <div>Inserts a new DOM element to another DOM element as its <i>first child</i>.</div>
                </li>
                <li>
                    <h4>append<span class="parameters">(dElement,dNewElement)</span></h4>
                    <pre>〇.DOM.append(〇.ELM.menu,contactLink)</pre>
                    <div>Inserts a new DOM element to another DOM element as its <i>last child</i>.</div>
                </li>
                <li>
                    <h4>remove<span class="parameters">(dElement)</span></h4>
                    <pre>〇.DOM.remove(〇.ELM.homeLink)</pre>
                    <div>Removes a DOM element.</div>
                </li>
            </ul>
        </section>
        <section>
            <h2>ELM</h2>
            <div>
                <i>ELM</i> provides a list of all DOM elements that has an ID, thus providing a quick-list to anything that can be found using <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById" target="_blank" title="Read more about getElementById at mozilla website">document.getElementById()</a>.<br/>
                It also provides a function to query several DOM elements and perform bulk actions on them.
            </div>
            <ul class="methods">
                <li>
                    <h4>refresh<span class="parameters">()</span></h4>
                    <pre>〇.ELM.refresh</pre>
                    <div>Updates the DOM elements list.</div>
                </li>
                <li>
                    <h4>observe<span class="parameters">(isEnabled)</span></h4>
                    <pre>〇.ELM.observe(true)</pre>
                    <div><i>Observe</i> is an event-listening to changes in the DOM which automatically refreshes the <i>〇.ELM</i> list. As it might influence performance, it is possible to disable and enable it.</div>
                </li>
                <li>
                    <h4>per<span class="parameters">()</span></h4>
                    <pre>var elements = 〇.ELM.per('.button');</pre>
                    <div><i>Per</i> returns a list of elements that corresponds to a provided query.
                        Additionally, this returned list has the following methods:
                        <ul class="methods">
                            <li>
                                <h4>each<span class="parameters">(fPerItem)</span></h4>
                                <pre>〇.ELM.per('.user').each(function (dElement) {...});</pre>
                                <div>Iterates the DOM elements using a forEach function.</div>
                            </li>
                            <li>
                                <h4>remove<span class="parameters">()</span></h4>
                                <pre>〇.ELM.per('.user').remove();</pre>
                                <div>Removes all the DOM elements in the list from the page.</div>
                            </li>
                            <li>
                                <h4>html<span class="parameters">(sNewInnerHTML)</span></h4>
                                <pre>〇.ELM.per('.js-version').html(〇.VER.framework);</pre>
                                <div>updates all DOM elements' innerHTML.</div>
                            </li>
                            <li>
                                <h4>useAsTemplate<span class="parameters">()</span></h4>
                                <pre>〇.ELM.per('.user').useAsTemplate();</pre>
                                <div>Subscribes the DOM elements as templates. They do not have to be classes as '<i>js-template</i>' but they must have an '<i>ID</i>'.</div>
                            </li>
                            <li>
                                <h4>css.add<span class="parameters">('sClassName')</span>/remove<span class="parameters">('sClassName')</span>/toggle<span class="parameters">('sClassName')</span></h4>
                                <pre>〇.ELM.per('.user').css.add('hidden');</pre>
                                <div>manipulates the DOM element's CSS classes.</div>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </section>
        <section>
            <h2>CSS</h2>
            <div>
                <i>CSS</i> is used to added and remove classes from DOM elements. <a href="http://www.w3.org/Style/CSS/Overview.en.html" target="_blank" title="Read more about CSS at W3">Cascading Style Sheets</a> are the way to set element's visual style.<br/>
                Although it is possible to set style by tag or by id, as the ID should be used by javascript and tags are, obviously used by the HTML.
                Classes, which suppose to be in the style 'domain', have the 'js-' prefixed automatically to differentiate them from other classes.
            </div>
            <ul class="methods">
                <li>
                    <h4>has<span class="parameters">(dElement,sClassName)</span></h4>
                    <pre>if (〇.CSS.has(〇.ELM.button,'enabled')) {}</pre>
                    <div>Returns true when a given DOM element has a class.</div>
                </li><li>
                    <h4>add<span class="parameters">(dElement,sClassName)</span></h4>
                    <pre>〇.CSS.add(〇.ELM.button,'enabled');</pre>
                    <div>Adds the class to the DOM element</div>
                </li><li>
                    <h4>remove<span class="parameters">(dElement,sClassName)</span></h4>
                    <pre>〇.CSS.remove(〇.ELM.button,'enabled');</pre>
                    <div>Removes a class from the DOM element</div>
                </li><li>
                    <h4>toggle<span class="parameters">(dElement,sClassName)</span></h4>
                    <pre>〇.CSS.toggle(〇.ELM.button,'enabled');</pre>
                    <div>Toggle a class (i.e. if element already has it, it be removed, otherwise it will be added)</div>
                </li><li>
                    <h4>isJsPrefix<span class="parameters">(isJsPrefixAdded)</span></h4>
                    <pre>〇.CSS.isJsPrefix(true);</pre>
                    <div>Sets whether the prefix <i>js-</i> should be added to any className handled by <i>〇.CSS</i>. Default is <i>true</i>. If no value was provided, the function will only return the current state.</div>
                </li>
            </ul>
        </section>
        <section>
            <h2>AJAX</h2>
            <div><i>AJAX</i> is used to communicate with websites, sending and receiving data.</div>
            <h3>Parameters used</h3>
            <ul class="parameters">
                <li><h4>sURL</h4> - the request's target.</li>
                <li><h4>oData</h4> - data being sent as a json object. <i>oData</i> is relevant only for <i>POST</i> and <i>PUT</i> requests.</li>
                <li><h4>oOptions</h4> - additional options may include
                    <ol type="i">
                        <li>credentials (boolean, default is <i>false</i>)</li>
                        <li>type (string, default is <i>'json'</i></li>
                    </ol></li>
                <li><h4>fCallback</h4> - the function to be called once the request is completed.</li>
            </ul>
            <h3>Methods</h3>
            <ul class="methods">
                <li>
                    <h4>get<span class="parameters">(sURL[, oOptions], fCallback)</span></h4>
                    <pre>〇.AJAX.get('/catalog', 〇.getDispatcher('catalogLoaded') );</pre>
                    <div>Uses AJAX request to retrieve the content of <i>sURL</i> and sends it to <i>fCallback</i></div>
                </li><li>
                    <h4>post<span class="parameters">(sURL,oData[, oOptions], fCallback)</span></h4>
                    <pre>〇.AJAX.post('/catalog/item/13953',{price:485.3}, 〇.getDispatcher('itemUpdated'));</pre>
                    <div>Sends <i>oData</i> to <i>sURL</i> via POST and its response to <i>fCallback</i></div>
                </li><li>
                    <h4>put<span class="parameters">(sURL,oData[, oOptions], fCallback)</span></h4>
                    <pre>〇.AJAX.put('/catalog/new',{name:'Red Pen',price:485.3}, 〇.getDispatcher('itemAdded'));</pre>
                    <div>
                        Sends <i>oData</i> to <i>sURL</i> via PUT and its response to <i>fCallback</i>.
                        <i>PUT</i> is used to send a complete object, while <i>POST</i> is used to send partial information, usually for update purposes.
                    </div>
                </li><li>
                    <h4>delete<span class="parameters">(sURL[, oOptions], fCallback)</span></h4>
                    <pre>〇.AJAX.get('/catalog/item/13953', 〇.getDispatcher('itemRemoved') );</pre>
                    <div>Sends DELETE command to <i>sURL</i> and its response to <i>fCallback</i></div>
                </li><li>
                    <h4>setDefaults</h4>
                    <pre>〇.AJAX.setDefaults(oSettings);</pre>
                    <div>Sets AJAX defaults parameters, such as:
                        <ol type="i">
                            <li>credentials (boolean, default is <i>false</i>)</li>
                            <li>type (string, default is <i>'json'</i></li>
                            <li>url (string, default is <i>'false</i></li>
                            <li>callback (string, default is <i>'false</i></li>
                        </ol>
                        Setting url or callback means that future calls, which don't provide these values, will use these default values.
                    </div>
                </li>
            </ul>
        </section>
        <section>
            <h2>TPL</h2>
            <div>
                <i>TPL</i> is rather simple template-engine, taking after <a href="https://mustache.github.io/" target="_blank" title="Read more about Mustache at its website">Mustache</a>
                Templates are HTML elements that
                <ol type="i">
                    <li>have ID</li>
                    <li>have the class 'js-template'</li>
                </ol>
                When the document is ready all template in the page are automatically subscribed.
                A change in the HTML element subscribed as template will change the template, thus allowing to have real-time changes in the templates (assuming the element wasn't replaced completely).
                In addition, <i>TPL</i> provides translation services.
                It is important to note that TPL provides a string, which then needs to be parsed to a DOM element that will be added to the page.
            </div>
            <h3>How to write a template</h3>
            <ul class="samples">
                <li>
                    <h4>Simple example: Hello World!</h4>
                    <div>Rendering the template <pre>Hello {{name}}</pre> with the data <pre>{name:'World'}</pre> will result the string <pre>Hello World</pre>.</div>
                </li><li>
                    <h4>When data is an object</h4>
                    <div>Data may contain an object, for example <pre>{user:{name:'World'}}</pre>, in which case the template should specify <pre>Hello {{user.name}}</pre>.</div>
                </li><li>
                    <h4>When data is a function</h4>
                    <div>Data may contain a function, for example <pre>{name: function () { return 'world'}}</pre>, but this will be automatically identified, so the template will remain <pre>Hello {{name}}</pre>.</div>
                </li><li>
                    <h4>Conditionals</h4>
                    <div>Conditionals allow hiding some of the template according to a variable. for example: <pre>Hello {{?showName}}{{name}}{{/showName}}</pre> where <i>showName</i> can either be a <i>boolean</i> or a function returning a <i>boolean</i>. <pre>Hello {{?!showName}}no name provided{{/showName}}</pre> will show <i>'no name provided'</i> ONLY if show equals false.</div>
                </li><li>
                    <h4>Shortcut to Object's sub-variables in the data</h4>
                    <div>When data contain an object, it is possible to easily access Object's properties using '@', for example: <pre>{{@user}}{{fName}} {{lName}}{{/user}}</pre> is equal to <pre>{{user.fName}} {{user.lName}}</pre>.</div>
                </li><li>
                    <h4>Iterating arrays in the data</h4>
                    <div>
                        It is possible to iterate arrays in the data using the loop <i>{{item@group}}</i>, for example: <pre>{{user@users}} {{name}} {{/user@users}}</pre>. Note this means the data should look like <pre>{users:{user:[{name:'John'},{name:'David'}]}}</pre>.
                        You may define a counter by appending to the prefix tag '<i>:</i>' and the name of the new variable, for example: <pre>{{item@group:_idx}} {{_idx}} {{/item@group}}</pre>. Please note the counter doesn't appear at the closing tag.
                    </div>
                </li><li>
                    <h4>Sub-templates</h4>
                    <div>A template may refer to another template using the syntax <i>data:template</i>, for example <pre>{{user:userTemplate}}</pre>. In our example, the <i>user</i> will be sent as data for the <i>userTemplate</i>.</div>
                </li><li>
                    <h4>using 'this'</h4>
                    <div>Sometime you might want to retrieve the entire data. This can be done using '<i>.</i>'. For example, when our data contains an array of strings - <pre>{fruits:{fruit:['orange','apple','melon']}}</pre> you may print the list using the iteration command <pre>{{fruit@fruits}} {{.}}, {{/fruit@fruits}}</pre></div>
                </li><li>
                    <h4>Updating delimiters</h4>
                    <div>If you template contains the string '<i>{{</i>' (or '<i>}}</i>') you might want to temporarily replace the delimiters. You can do so with the <i>'{{'startTag','endTag'}} ... '{{/'startTag','endTag'}}</i>, for example  <pre>{{'&lt;?','?&gt;'}}Hello &lt;?name?&gt;{{/'&lt;?','?&gt;'}}</pre></div>
                </li><li>
                    <h4>Translation</h4>
                    <div>It is advised that strings shouldn't be hard-coded in your structure, rather the variables that can be translates. This can easily be done using <i>'#string.code'</i>, for example <pre>{{#label.hello}}}</pre>.
                        The string code is comprised with two elements, separated by a '<i>.</i>': context and default-value. The context is meant to help you know where and how the string is used; default-value  is the string that appear in case the current locale doesn't contain the string-code.
                        It is worth to emphasize that the translation files include the full string code (in our example <i>label.hello</i>). The default value begins after the first '<i>.</i>' and may contain any character (including spaces).
                    </div>
                </li>
                <li>
                    <h4>Order of rendering</h4>
                    <div>Let's look at this sample-data <pre>{{main:{isVisible:true,sub:{isVisible:false}}}}</pre> and the template <pre>{{@sub}}{{?isVisible}}Hello!{{/isVisible}}{{/sub}}</pre> the variable that will be checked is <i>sub.isVisible</i> (and not <i>main.isVisible</i>).
                        This means the order or parsing the template is crucial. It follows this logic -
                        <ol type="i">
                            <li>Replace delimiters where needed</li>
                            <li>Handle with sub-variables</li>
                            <li>Handle with iterations</li>
                            <li>Filter out elements according to conditionals</li>
                            <li>Replace variables</li>
                            <li>Translate string</li>
                        </ol> It is important to note that each sub-section will go through the entire process before combining all elements together (meaning part-i will be translated before part-ii will iterate its loop
                    </div>
                </li>
            </ul>
            <h3>Methods</h3>
            <ul class="methods">
                <li>
                    <h4>load<span class="parameters">(sURL)</span></h4>
                    <pre>〇.TPL.load('myTemplates.html');</pre>
                    <div>
                        <i>Load</i> read an <i>text/html</i> online document and then reads and subscribes all the templates it contains. Once loaded, a 'TPL.templatesLoaded' event will be dispatched, where its detail is the current <i>list</i> of templates.
                    </div>
                </li><li>
                    <h4>use<span class="parameters">(domElement)</span></h4>
                    <pre>〇.TPL.load(〇.ELM.myNewTemplate);</pre>
                    <div>
                        <i>Use</i> read a single element and subscribe its ID to the template list for later use.
                    </div>
                </li><li>
                    <h4>loadLanguage<span class="parameters">(sURL)</span></h4>
                    <pre>〇.TPL.loadLanguage('/i18n/en-us.json');</pre>
                    <div>
                        <i>LoadLanguage</i> read an <i>application/json</i> online document and then append its content to the strings object.
                        The expected json content is <pre>{'localeName':{'str.code1':'translation1','str.code2':'translation2'}}</pre>. for example - <pre>{'en-us':{'label.hello':'hello}}</pre>
                    </div>
                </li><li>
                    <h4>appendToLanguage<span class="parameters">(sLocale,oDictionary)</span></h4>
                    <pre>〇.TPL.appendToLanguage('en-us',{'label.hello':'Hello','button.cancel':'Cancel'});</pre>
                    <div>
                        <i>AppendToLanguage</i> appends a dictionary (set of key-values) to a given locale.
                    </div>
                </li><li>
                    <h4>translate<span class="parameters">(sStringCode)</span></h4>
                    <pre>〇.TPL.translate('button.signup');</pre>
                    <div>
                        <i>Translate</i> returns the translation from the current locale's dictionary. If the string-code doesn't not appear in the dictionary, the <i>default-value</i> will be returned.
                    </div>
                </li><li>
                    <h4>getLocale<span class="parameters">()</span></h4>
                    <pre>〇.TPL.getLocale();</pre>
                    <div>
                        <i>GetLocale</i> returns the current locale.
                    </div>
                </li><li>
                    <h4>list<span class="parameters">()</span></h4>
                    <pre>〇.TPL.list();</pre>
                    <div>
                        <i>List</i> return an array of all subscribed templates.
                    </div>
                </li><li>
                    <h4>render<span class="parameters">(oData)</span></h4>
                    <pre>〇.TPL.render({'linkTemplate':{label:'{{#link.Sign Up}}',href='/signup'}});</pre>
                    <div>
                        <i>Render</i> returns the HTML output of processing a provided template with given data. It receives a single data object, who single key is the name of the template to be used and its value is the data object that will be used per that template.
                    </div>
                </li>
            </ul>
        </section>
        <section>
            <h2>VER</h2>
            <div><i>VER</i> is a placeholder to provide information regarding 〇. Currently it provides only the version number</div>
            <ul class="methods">
                <li>
                    <h4>framework</h4>
                    <pre>var version = 〇.VER.framework;</pre>
                    <div>Return the current version of the framework</div>
                </li>
            </ul>
        </section>
        <section>
            <h2>Final words</h2>
            <div>
                <p>
                    Code,as all Intellectual Property, should be free.
                    Therefore this code is <a href="LICENSE" target="_blank" title="Read the license">free</a> under <a href="https://en.wikipedia.org/wiki/MIT_License" target="_blank" title="Read about the license">MIT License</a>.
                </p>
                <p>If you have any comments, questions and answers, don't hesitate to contact me via <a href="https://github.com/odedshr/" target="_blank" title="Link to my github">GitHub</a>.</p>
            </div>
        </section>
        <footer>end of file</footer>
    </article>
    <script type="text/html" id="headerTemplate" class="js-template"> <a name='{{anchor}}'>{{title}}</a></script>
    <script type="text/html" id="navLinkTemplate" class="js-template"> <a href='#{{anchor}}' class="navLink navLink-{{className}}">{{title}}</a></script>
    <script type="text/html" id="translatedWorldTemplate" class="js-template"> <div>{{#label.Hello}} {{name}}</div></script>
    <script type="text/html" id="helloWorldTemplate" class="js-template"> <div>Hello {{name}}</div></script>
    <script type="text/html" id="changeTagsTemplate" class="js-template"> <div>{{'<?','?>'}}Hello <?name?>{{/'<?','?>'}} {{name}}</div></script>
    <script type="text/html" id="nestedDataTemplate" class="js-template"> <div>User:{{user.name}}<br/>Age:{{user.age}}</div></script>
    <script type="text/html" id="arrayTemplate" class="js-template"> <ul>{{user@users:_idx}}<li>{{_idx}} {{name}}</li>{{/user@users}}</ul></script>
    <script type="text/html" id="templateWithSubTemplate" class="js-template"> <div>includes helloWorld: {{user:helloWorldTemplate}}</div></script>
    <script type="text/html" id="ifTemplate" class="js-template"> <div>{{?isShown}}Shown!{{/isShown}}{{?!isShown}}Invisible{{/isShown}}</div></script>
    <script type="text/html" id="innerDataTemplate" class="js-template"> <div>User:{{@user}}name = {{name}} {{/user}}<br/>{{@user.age}} Age = {{.}} {{/user.age}}</div></script>
    <script type="text/html" class="js-template">
        <div>Hello world</div>
    </script>
    <script type="application/javascript" src="index.js"></script>
    <script src="http://code.jquery.com/qunit/qunit-1.19.0.js"></script>
    <script src="o.unit.js"></script>

</body>
</html>