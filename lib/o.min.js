ã€‡=O=function(){return this.VER={framework:"0.1.1"},this.EVT=function(){var e={},t=window.onload?window.onload:!1,n=function(e,t){return document.dispatchEvent(new CustomEvent(e,{detail:t})),this},i=function(e,t){return"function"==typeof t&&r(e,t),function(t){return n(e,t),!1}},r=function(e,t){return document.addEventListener(e,t),this},o=function(e,t){return document.removeEventListener(e,t),this};return e.subscribe=r.bind(e),e.unsubscribe=o.bind(e),e.dispatch=n.bind(e),e.getDispatcher=i.bind(e),window.onload=e.getDispatcher("window.onload"),t&&e.subscribe("window.onload",t),e}.call(this),this.ELM=function(){var e={},t=function(){var e=this;for(var t in this)this.hasOwnProperty(t)&&"function"!=typeof this[t]&&delete this[t];return[].forEach.call(document.querySelectorAll("[id]"),function(t){e[t.id]=t}),this}.bind(e),n=new MutationObserver(t.bind(e)),i={childList:!0,subtree:!0,attributes:!1,characterData:!1,attributeOldValue:!1,characterDataOldValue:!1},r=function(e){return e?(n.observe(document.body,i),t()):n.disconnect(),this}.bind(e),o=function(e){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=0;i<this.length;i++)t[0]=this[i],e.apply(this,t);return this},s=function(e){var t=document.querySelectorAll(e);return t.each=o.bind(t),t.remove=o.bind(t,this.DOM.remove),t.useAsTemplate=o.bind(t,this.TPL.use),t.html=o.bind(t,function(e,t){e.innerHTML=t}),t.css={add:o.bind(t,this.CSS.add),remove:o.bind(t,this.CSS.remove),toggle:o.bind(t,this.CSS.toggle)},t}.bind(this);return e.refresh=t,e.per=s.bind(e),e.observe=r,this.EVT.subscribe("window.onload",function(){r(!0)}.bind(this)),e}.call(this),this.DOM=function(){var e={},t=function(e,t,n){var i=document.createElement(e);return t&&Object.keys(t).forEach(function(e){i.setAttribute(e,t[e])}),n&&(i.innerHTML=n),i},n=new DOMParser,i=function(e){return n.parseFromString(e.trim(),"text/html").body.firstChild},r=function(e){return"string"==typeof e?i(e):e},o=function(e,t){return e.parentNode.insertBefore(r(t),e),this},s=function(e,t){return e.parentNode.insertBefore(r(t),e.nextSibling),this},a=function(e,t){return e.insertBefore(r(t),e.firstChild),this},u=function(e,t){return e.appendChild(r(t)),this},d=function(e){if("object"!=typeof e)throw"bad input for DOM.remove function ("+e+")";if(!e.parentNode||!e.removeChild)throw"cannot remove child without a parentNode";e.parentNode.removeChild(e)};return e.create=t.bind(e),e.parse=i.bind(e),e.insertBefore=o.bind(e),e.insertAfter=s.bind(e),e.prepend=a.bind(e),e.append=u.bind(e),e.remove=d.bind(e),e}.call(this),this.CSS=function(){var e={},t="js-",n=!0,i=function(){return n?t:""},r=function(e,t){return e&&e.className.split(" ").indexOf(i()+t)>-1},o=function(e,t,n,r){var o=e.className.split(" "),s=-1!=o.indexOf(i()+t);return s?(r||!n&&!r)&&o.splice(o.indexOf(i()+t),1):(n||!n&&!r)&&o.push(i()+t),e.className=o.join(" "),this},s=function(e,t){var n=e.className.split(" ");return-1==n.indexOf(i()+t)&&n.push(i()+t),e.className=n.join(" "),this},a=function(e,t){var n=e.className.split(" ");return-1!=n.indexOf(i()+t)&&n.splice(n.indexOf(i()+t),1),e.className=n.join(" "),this};return e.has=r.bind(e),e.add=s.bind(e),e.remove=a.bind(e),e.toggle=o.bind(e),e.toggle=o.bind(e),e.isJsPrefixed=function(e){return"undefined"!=typeof e&&(n=e),n},e}.call(this),this.AJAX=function(){var e={},t={credentials:!1,type:"json",url:!1,callback:!1},n=function(e,n,i,r,o){if(["GET","DELETE"].indexOf(e)>-1&&(o=r,r=i,delete i),"undefined"==typeof n){if(!t.url)throw new Error("missing-url");n=t.url}o=o||{};var s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return s.onload=function(){if(s.readyState==XMLHttpRequest.DONE){if(4!=+s.readyState||200!=+s.status)throw"ajax-error-"+s.status;r?r(s.response):t.callback?t.callback(s.response):!1}},s.withCredentials="undefined"!=typeof o.credentials?o.credentials:t.credentials,o.type&&(s.responseType=o.type),t.type&&(s.responseType=t.type),s.open(e,encodeURI(n),!0),s.send(i?JSON.stringify(i):!1),s},i=function(e){for(var n in e)t.hasOwnProperty(n)&&(t[n]=e[n])};return e.get=n.bind(e,"GET"),e.post=n.bind(e,"POST"),e.put=n.bind(e,"PUT"),e.delete=n.bind(e,"DELETE"),e.setDefaults=i.bind(e),e}.call(this),this.TPL=function(){var e=function(){return(window.navigator.userLanguage||window.navigator.language).toLowerCase()},t=e(),n={};n[t]={};var i,r,o,s,a,u,d,c={},f={},l=[{start:"{{",end:"}}"}],h=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},p=function(e,t){i=new RegExp(e+"([^#}]+?)"+t,"g"),r=new RegExp(e+"#(.+?)"+t,"g"),o=new RegExp(e+"\\?(.+?)"+t+"(.+?)"+e+"\\/\\1"+t,"g"),s=new RegExp(e+"\\?\\!(.+?)"+t+"(.+?)"+e+"\\/\\1"+t,"g"),a=new RegExp(e+"([^@}]+?)@(.+?)(:(.+?))?"+t+"(.+?)"+e+"\\/\\1@\\2"+t,"g"),u=new RegExp(e+"\\@(.+?)"+t+"(.+?)"+e+"\\/\\1"+t,"g"),d=new RegExp(e+"'([^'}]+?)','(.+?)'"+t+"(.+?)"+e+"\\/'\\1','\\2'"+t,"g")}.bind(this),b=function(e){var t=e?e.getAttribute("id"):!1;if(!t)throw new Error("cannot use element without ID for template");return f[t]=e,this}.bind(c),g=function(){return Object.keys(f)},v=function(e){return this.AJAX.get(e,function(e){var t=e.querySelectorAll(".js-template[id]");[].forEach.call(t,b),this.EVT.dispatch("TPL.templatesLoaded",g())}.bind(this),{type:"document"}),this}.bind(this),w=function(e){return this.AJAX.get(e,function(e){for(var t in e)e.hasOwnProperty(t)&&m(t,e[t]);this.EVT.dispatch("TPL.languageLoaded",Object.keys(e))}.bind(this),{type:"json"}),this}.bind(this),m=function(e,t){"undefined"==typeof n[e]&&(n[e]={});for(var i in t)t.hasOwnProperty(i)&&(n[e][i]=t[i]);return this},y=function(n){return t=n?n:e(),this},E=function(){return t},O=function(e,t){var n=t.split(":"),i=n[1],r=n[0];if("."===t)r=e;else{var o=t.split(".");if(o.length>1){r=e.hasOwnProperty(o[0])?e[o[0]]:o[0];for(var s=1;s<o.length;s++)r=r.hasOwnProperty(o[s])?r[o[s]]:o[s]}else r=e.hasOwnProperty(t)?e[t]:"."===t?e:t}if(i){var a={};return a[i]=r,L(a)}return r},x=function(e){return"function"==typeof e?e():"object"==typeof e?JSON.stringify(e):e},j=function(e){var i=n[t][e];return x("undefined"!=typeof i?i:e.substr(e.indexOf(".")+1))},L=function(e){if(1!==Object.keys(e).length)throw new Error("cannot render multiple templates!");var t=Object.keys(e)[0];return T(f[t].innerHTML,e[t])},T=function(e,t){for(var n;n=d.exec(e);){var c={start:h(n[1]),end:h(n[2])};l.push(c),p(c.start,c.end),e=e.split(n[0]).join(T(n[3],t)),l.pop();var f=l[l.length-1];p(f.start,f.end),d.lastIndex=0}for(;n=u.exec(e);)e=e.split(n[0]).join(T(n[2],O(t,n[1]))),u.lastIndex=0;for(;n=a.exec(e);){var b=[];O(t,n[2])[n[1]].forEach(function(e,t){"object"==typeof e&&"undefined"!=typeof n[4]&&(e[n[4]]=t),b.push(T(n[5],e))}),e=e.split(n[0]).join(b.join("")),a.lastIndex=0}for(;n=s.exec(e);)e=e.split(n[0]).join(O(t,n[1])?"":n[2]),s.lastIndex=0;for(;n=o.exec(e);)e=e.split(n[0]).join(O(t,n[1])?n[2]:""),o.lastIndex=0;for(;n=i.exec(e);)e=e.split(n[0]).join(x(O(t,n[1]))),i.lastIndex=0;for(;n=r.exec(e);)e=e.split(n[0]).join(j(n[1])),r.lastIndex=0;return e};return p(l[0].start,l[0].end),c.load=v.bind(c),c.use=b,c.loadLanguage=w.bind(c),c.appendToLanguage=m.bind(c),c.translate=j.bind(c),c.setLocale=y.bind(c),c.getLocale=E.bind(c),c.list=g.bind(c),c.render=L.bind(c),this.EVT.subscribe("window.onload",function(){this.ELM.per(".js-template[id]").useAsTemplate()}.bind(this)),c}.call(this),this}.call("undefined"!=typeof O?O:{});